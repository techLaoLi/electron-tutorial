## 06 菜单、快捷键、托盘

- 目标：自定义应用菜单、注册全局快捷键与系统托盘。

### 应用菜单
```ts
import { Menu } from 'electron'

const template: Electron.MenuItemConstructorOptions[] = [
  { label: '应用', submenu: [{ role: 'about' }, { type: 'separator' }, { role: 'quit' }] },
  { label: '编辑', submenu: [{ role: 'undo' }, { role: 'redo' }, { type: 'separator' }, { role: 'copy' }, { role: 'paste' }] }
]
Menu.setApplicationMenu(Menu.buildFromTemplate(template))
```

### 全局快捷键
```ts
import { globalShortcut, app } from 'electron'

app.whenReady().then(() => {
  globalShortcut.register('CommandOrControl+Shift+I', () => {
    const win = BrowserWindow.getFocusedWindow()
    win?.webContents.openDevTools({ mode: 'detach' })
  })
})
```

### 托盘图标
```ts
import { Tray, Menu, nativeImage } from 'electron'

let tray: Tray | null = null
export function createTray() {
  const icon = nativeImage.createFromPath('icons/trayTemplate.png')
  tray = new Tray(icon)
  const menu = Menu.buildFromTemplate([
    { label: '显示主窗口', click: () => BrowserWindow.getAllWindows()[0]?.show() },
    { type: 'separator' },
    { label: '退出', role: 'quit' }
  ])
  tray.setToolTip('Electron 教程应用')
  tray.setContextMenu(menu)
}
```

### 本章要点
- 使用 `role` 快速实现常用菜单项
- 快捷键注意释放：`app.on('will-quit', () => globalShortcut.unregisterAll())`
- 托盘在 macOS 使用 Template 图标以支持暗色模式
