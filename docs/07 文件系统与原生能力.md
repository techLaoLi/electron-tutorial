## 07 文件系统与原生能力

- 目标：通过主进程封装受控的原生能力，并在渲染端以安全 API 使用。

### 文件系统封装
- 读取/写入文本文件（基于第 05 章 IPC 模式）
- 选择文件对话框

```ts
import { ipcMain, dialog } from 'electron'
import { promises as fs } from 'node:fs'

ipcMain.handle('dialog:open-file', async () => {
  const { canceled, filePaths } = await dialog.showOpenDialog({ properties: ['openFile'] })
  if (canceled || filePaths.length === 0) return null
  return filePaths[0]
})

ipcMain.handle('fs:write-text', async (_e, filePath: string, content: string) => {
  await fs.writeFile(filePath, content, 'utf8')
  return true
})
```

### 剪贴板、通知等
```ts
import { clipboard, Notification } from 'electron'

ipcMain.handle('clipboard:readText', () => clipboard.readText())
ipcMain.handle('notify:show', (_e, title: string, body: string) => {
  new Notification({ title, body }).show()
})
```

### 本章要点
- 原生能力统一由主进程封装、白名单暴露
- 对话框等 UI 原生组件需在主进程调用
